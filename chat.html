
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ØªÙ‚Ø¯ÙŠØ± - Ù…Ø³Ø§Ø¹Ø¯ Ø°ÙƒÙŠ Ù„ØªÙ‚Ø¯ÙŠØ± Ø§Ù„Ù‚ÙˆÙ‰ Ø§Ù„Ø¹Ø§Ù…Ù„Ø© Ø§Ù„ØªØ·ÙˆØ¹ÙŠØ©</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700;900&display=swap');
    
    * { 
      box-sizing: border-box; 
      margin: 0; 
      padding: 0; 
    }

    body {
      font-family: 'Cairo', sans-serif;
      background: linear-gradient(135deg, #667eea, #764ba2);
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      direction: rtl;
    }

    .chat-container {
      width: 100%;
      max-width: 500px;
      height: 95vh;
      background: rgba(255, 255, 255, 0.95);
      border-radius: 20px;
      display: flex;
      flex-direction: column;
      overflow: hidden;
      box-shadow: 0 15px 35px rgba(0,0,0,0.1);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .chat-header {
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: white;
      padding: 25px 20px;
      text-align: center;
      border-radius: 20px 20px 0 0;
    }

    .header-title {
      font-size: 1.8rem;
      font-weight: 900;
      margin-bottom: 5px;
    }

    .header-subtitle {
      font-size: 0.9rem;
      opacity: 0.9;
      font-weight: 400;
    }

    .chat-box {
      flex: 1;
      padding: 20px;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      gap: 15px;
      background: #f8fafc;
    }

    .message {
      padding: 15px 20px;
      border-radius: 18px;
      max-width: 85%;
      line-height: 1.6;
      word-wrap: break-word;
      font-size: 15px;
      animation: fadeIn 0.3s ease-in-out;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }

    .message.user {
      align-self: flex-end;
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: #fff;
      border-bottom-left-radius: 5px;
    }

    .message.bot {
      align-self: flex-start;
      background: #ffffff;
      color: #2d3748;
      border-bottom-right-radius: 5px;
      border: 1px solid #e2e8f0;
    }

    .message.system {
      align-self: center;
      background: linear-gradient(135deg, #4facfe, #00f2fe);
      color: white;
      text-align: center;
      font-weight: 600;
      max-width: 90%;
    }

    .input-area {
      display: flex;
      border-top: 1px solid #e5e7eb;
      background: #fff;
      padding: 15px;
      gap: 12px;
    }

    .input-area input {
      flex: 1;
      border: 2px solid #e2e8f0;
      border-radius: 25px;
      padding: 12px 20px;
      font-size: 15px;
      outline: none;
      transition: all 0.3s ease;
      font-family: 'Cairo', sans-serif;
    }

    .input-area input:focus {
      border-color: #667eea;
      box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
    }

    .input-area button {
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: white;
      border: none;
      border-radius: 25px;
      padding: 12px 20px;
      font-size: 15px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-family: 'Cairo', sans-serif;
      font-weight: 600;
      min-width: 80px;
    }

    .input-area button:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
    }

    .input-area button:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .typing-indicator {
      display: none;
      align-self: flex-start;
      background: #ffffff;
      border: 1px solid #e2e8f0;
      border-radius: 18px;
      padding: 15px 20px;
      margin-bottom: 10px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }

    .typing-dots {
      display: flex;
      gap: 4px;
    }

    .typing-dots span {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: #667eea;
      animation: typing 1.4s infinite ease-in-out;
    }

    .typing-dots span:nth-child(1) { animation-delay: 0s; }
    .typing-dots span:nth-child(2) { animation-delay: 0.2s; }
    .typing-dots span:nth-child(3) { animation-delay: 0.4s; }

    @keyframes typing {
      0%, 60%, 100% { transform: scale(1); opacity: 0.5; }
      30% { transform: scale(1.2); opacity: 1; }
    }

    .suggestion-buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 10px;
    }

    .suggestion-btn {
      background: #f7fafc;
      border: 1px solid #e2e8f0;
      border-radius: 15px;
      padding: 8px 15px;
      font-size: 13px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-family: 'Cairo', sans-serif;
      color: #4a5568;
    }

    .suggestion-btn:hover {
      background: #667eea;
      color: white;
      border-color: #667eea;
    }

    .results-table {
      background: #f8fafc;
      border-radius: 10px;
      padding: 15px;
      margin-top: 10px;
      border: 1px solid #e2e8f0;
    }

    .results-row {
      display: flex;
      justify-content: space-between;
      padding: 8px 0;
      border-bottom: 1px solid #e2e8f0;
    }

    .results-row:last-child {
      border-bottom: none;
      font-weight: 600;
      background: #667eea;
      color: white;
      margin: 10px -15px -15px;
      padding: 12px 15px;
      border-radius: 0 0 10px 10px;
    }

    .welcome-message {
      text-align: center;
      color: #4a5568;
      padding: 20px;
      font-style: italic;
    }

    @media (max-width: 768px) {
      .chat-container {
        height: 100vh;
        border-radius: 0;
        max-width: 100%;
      }
      
      .chat-header {
        border-radius: 0;
        padding: 20px;
      }
      
      .header-title {
        font-size: 1.5rem;
      }
    }
  </style>
</head>
<body>
  <div class="chat-container">
    <div class="chat-header">
      <div class="header-title">ğŸ§® ØªÙ‚Ø¯ÙŠØ±</div>
      <div class="header-subtitle">Ù…Ø³Ø§Ø¹Ø¯ Ø°ÙƒÙŠ Ù„ØªÙ‚Ø¯ÙŠØ± Ø§Ù„Ù‚ÙˆÙ‰ Ø§Ù„Ø¹Ø§Ù…Ù„Ø© Ø§Ù„ØªØ·ÙˆØ¹ÙŠØ©</div>
    </div>

    <div id="chatBox" class="chat-box">
      <div class="message system">
        Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ù…Ù†ØµØ© ØªÙ‚Ø¯ÙŠØ±! ğŸ‘‹
      </div>
      <div class="message bot">
        Ø£Ù‡Ù„Ø§Ù‹ ÙˆØ³Ù‡Ù„Ø§Ù‹! Ø£Ù†Ø§ Ù…Ø³Ø§Ø¹Ø¯Ùƒ Ø§Ù„Ø°ÙƒÙŠ Ù„ØªÙ‚Ø¯ÙŠØ± Ø§Ù„Ù‚ÙˆÙ‰ Ø§Ù„Ø¹Ø§Ù…Ù„Ø© Ø§Ù„ØªØ·ÙˆØ¹ÙŠØ©. Ø³Ø£Ø³Ø§Ø¹Ø¯Ùƒ ÙÙŠ Ø­Ø³Ø§Ø¨ Ø¹Ø¯Ø¯ Ø§Ù„Ù…ØªØ·ÙˆØ¹ÙŠÙ† ÙˆØ§Ù„Ù…Ù†Ø¸Ù…ÙŠÙ† ÙˆØ§Ù„Ù…Ø´Ø±ÙÙŠÙ† ÙˆØ§Ù„Ù…Ø³Ø¹ÙÙŠÙ† ÙˆØºÙŠØ±Ù‡Ù… Ù…Ù† Ø§Ù„ÙƒÙˆØ§Ø¯Ø± Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© Ù„ÙØ¹Ø§Ù„ÙŠØªÙƒ.
        
        <br><br>Ù„Ù†Ø¨Ø¯Ø£ØŒ Ø£Ø®Ø¨Ø±Ù†ÙŠ Ø¹Ù† ÙØ¹Ø§Ù„ÙŠØªÙƒ:
        
        <div class="suggestion-buttons">
          <button class="suggestion-btn" onclick="sendSuggestion('Ù…Ø¤ØªÙ…Ø± ÙÙŠ Ø§Ù„Ø±ÙŠØ§Ø¶')">Ù…Ø¤ØªÙ…Ø± ÙÙŠ Ø§Ù„Ø±ÙŠØ§Ø¶</button>
          <button class="suggestion-btn" onclick="sendSuggestion('Ù…Ù‡Ø±Ø¬Ø§Ù† ÙÙŠ Ø¬Ø¯Ø©')">Ù…Ù‡Ø±Ø¬Ø§Ù† ÙÙŠ Ø¬Ø¯Ø©</button>
          <button class="suggestion-btn" onclick="sendSuggestion('Ù…Ø¹Ø±Ø¶ ØªØ¬Ø§Ø±ÙŠ')">Ù…Ø¹Ø±Ø¶ ØªØ¬Ø§Ø±ÙŠ</button>
          <button class="suggestion-btn" onclick="sendSuggestion('ÙØ¹Ø§Ù„ÙŠØ© Ø±ÙŠØ§Ø¶ÙŠØ©')">ÙØ¹Ø§Ù„ÙŠØ© Ø±ÙŠØ§Ø¶ÙŠØ©</button>
        </div>
      </div>
    </div>

    <div class="typing-indicator" id="typingIndicator">
      <div class="typing-dots">
        <span></span>
        <span></span>
        <span></span>
      </div>
    </div>

    <div class="input-area">
      <input type="text" id="userInput" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ Ù‡Ù†Ø§...">
      <button id="sendBtn">Ø¥Ø±Ø³Ø§Ù„</button>
    </div>
  </div>

  <script>
    const sendBtn = document.getElementById("sendBtn");
    const userInput = document.getElementById("userInput");
    const chatBox = document.getElementById("chatBox");
    const typingIndicator = document.getElementById("typingIndicator");
    const API_KEY = "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";

    let conversationState = {
      step: 'initial',
      eventData: {},
      collectedInfo: {
        eventType: null,
        location: null,
        attendees: null,
        duration: null,
        buildings: null,
        area: null,
        workHours: null,
        complexity: null,
        budget: null
      }
    };

    // ØªÙ‚Ø¯ÙŠØ± Ø°ÙƒÙŠ Ù„Ù„Ù‚ÙˆÙ‰ Ø§Ù„Ø¹Ø§Ù…Ù„Ø©
    const systemPrompts = {
      systemMessage: `Ø£Ù†Øª Ù…Ø³Ø§Ø¹Ø¯ Ø°ÙƒÙŠ Ù…ØªØ®ØµØµ ÙÙŠ ØªÙ‚Ø¯ÙŠØ± Ø§Ù„Ù‚ÙˆÙ‰ Ø§Ù„Ø¹Ø§Ù…Ù„Ø© Ø§Ù„ØªØ·ÙˆØ¹ÙŠØ© ÙˆØ§Ù„Ù…ÙˆØ§Ø±Ø¯ Ø§Ù„Ø¨Ø´Ø±ÙŠØ© Ù„Ù„ÙØ¹Ø§Ù„ÙŠØ§Øª ÙˆØ§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ ÙÙŠ Ø§Ù„Ù…Ù…Ù„ÙƒØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©. 

Ù…Ù‡Ù…ØªÙƒ:
1. Ø¬Ù…Ø¹ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© Ø¹Ù† Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ© Ù…Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
2. ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ­Ø³Ø§Ø¨ Ø§Ù„ØªÙ‚Ø¯ÙŠØ±Ø§Øª Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø¹Ø§ÙŠÙŠØ± Ø§Ù„Ù…Ù‡Ù†ÙŠØ©
3. ØªÙ‚Ø¯ÙŠÙ… ØªÙ‚Ø±ÙŠØ± Ù…ÙØµÙ„ ÙŠØ´Ù…Ù„:
   - Ø¹Ø¯Ø¯ Ø§Ù„Ù…ØªØ·ÙˆØ¹ÙŠÙ† Ø§Ù„Ù…Ø·Ù„ÙˆØ¨
   - Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù†Ø¸Ù…ÙŠÙ† ÙˆØ§Ù„Ù…Ø´Ø±ÙÙŠÙ†
   - Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø³Ø¹ÙÙŠÙ† ÙˆØ§Ù„Ø£Ù…Ù†
   - Ø¹Ø¯Ø¯ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠÙŠÙ†
   - Ø§Ù„ØªÙƒÙ„ÙØ© Ø§Ù„ØªÙ‚Ø¯ÙŠØ±ÙŠØ©
   - Ø§Ù„ØªÙˆØµÙŠØ§Øª ÙˆØ§Ù„Ù†ØµØ§Ø¦Ø­

Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©:
- Ù†ÙˆØ¹ Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ© (Ù…Ø¤ØªÙ…Ø±ØŒ Ù…Ù‡Ø±Ø¬Ø§Ù†ØŒ Ù…Ø¹Ø±Ø¶ØŒ ÙˆØ±Ø´Ø©ØŒ Ø±ÙŠØ§Ø¶ÙŠØ©ØŒ Ø«Ù‚Ø§ÙÙŠØ©ØŒ Ø®ÙŠØ±ÙŠØ©)
- Ø§Ù„Ù…ÙˆÙ‚Ø¹/Ø§Ù„Ù…Ù†Ø·Ù‚Ø©
- Ø¹Ø¯Ø¯ Ø§Ù„Ø­Ø¶ÙˆØ± Ø§Ù„Ù…ØªÙˆÙ‚Ø¹
- Ù…Ø¯Ø© Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ© (Ø£ÙŠØ§Ù…)
- Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø¨Ø§Ù†ÙŠ/Ø§Ù„Ù‚Ø§Ø¹Ø§Øª
- Ø§Ù„Ù…Ø³Ø§Ø­Ø© Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ©
- Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„ÙŠÙˆÙ…ÙŠØ©
- Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØªØ¹Ù‚ÙŠØ¯
- Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ© Ø§Ù„ØªÙ‚Ø¯ÙŠØ±ÙŠØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)

Ù…Ø¹Ø§ÙŠÙŠØ± Ø§Ù„Ø­Ø³Ø§Ø¨:
- Ù†Ø³Ø¨Ø© Ø§Ù„Ù…ØªØ·ÙˆØ¹ÙŠÙ† Ù„Ù„Ø­Ø¶ÙˆØ±: 3-8% Ø­Ø³Ø¨ Ù†ÙˆØ¹ Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ©
- Ù…Ø´Ø±Ù Ù„ÙƒÙ„ 8-12 Ù…ØªØ·ÙˆØ¹
- Ù…Ù†Ø³Ù‚ Ù„ÙƒÙ„ 3-4 Ù…Ø´Ø±ÙÙŠÙ†
- Ù…Ø³Ø¹Ù Ù„ÙƒÙ„ 200-500 Ø´Ø®Øµ Ø­Ø³Ø¨ Ù†ÙˆØ¹ Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ©
- Ø£Ù…Ù†: 1-2 Ù„ÙƒÙ„ 100 Ø´Ø®Øµ
- Ù…ÙˆØ¸Ù Ø§Ø³ØªÙ‚Ø¨Ø§Ù„: 1 Ù„ÙƒÙ„ Ù…Ø¯Ø®Ù„ Ø£Ùˆ 200 Ø´Ø®Øµ

Ø§Ø·Ø±Ø­ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø¨Ø´ÙƒÙ„ ØªØ¯Ø±ÙŠØ¬ÙŠ ÙˆÙ…Ø±ÙŠØ­ØŒ ÙˆØ§Ø¬Ø¹Ù„ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø© Ø·Ø¨ÙŠØ¹ÙŠØ© ÙˆÙˆØ¯ÙŠØ©.`
    };

    async function sendMessage() {
      const message = userInput.value.trim();
      if (!message) return;

      appendMessage("user", message);
      userInput.value = "";
      sendBtn.disabled = true;

      showTypingIndicator();

      try {
        const response = await fetch("https://api.openai.com/v1/chat/completions", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            "Authorization": `Bearer ${API_KEY}`
          },
          body: JSON.stringify({
            model: "gpt-4",
            messages: [
              { role: "system", content: systemPrompts.systemMessage },
              { role: "user", content: message }
            ],
            temperature: 0.7,
            max_tokens: 1500
          })
        });

        hideTypingIndicator();

        if (!response.ok) {
          throw new Error(`HTTP error! status: ${response.status}`);
        }

        const data = await response.json();

        if (data.error) {
          throw new Error(data.error.message);
        }

        const botReply = data.choices[0].message.content;
        appendMessage("bot", botReply);

      } catch (error) {
        hideTypingIndicator();
        // Ù…Ø¨Ø§Ø´Ø±Ø© Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø­Ø§ÙƒØ§Ø© Ø¯ÙˆÙ† Ø±Ø³Ø§Ø¦Ù„ Ø®Ø·Ø£
        simulateResponse(message);
      } finally {
        sendBtn.disabled = false;
      }
    }

    function simulateResponse(userMessage) {
      const message = userMessage.toLowerCase();
      let response = "";
      
      // ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù…Ù† Ø§Ù„Ø±Ø³Ø§Ù„Ø©
      extractInfoFromMessage(userMessage);
      
      // ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„ØªØ§Ù„ÙŠØ©
      if (!conversationState.collectedInfo.eventType) {
        if (message.includes('Ù…Ø¤ØªÙ…Ø±')) {
          conversationState.collectedInfo.eventType = 'conference';
          response = "Ù…Ù…ØªØ§Ø²! Ù…Ø¤ØªÙ…Ø±. ğŸ“‹\n\nÙƒÙ… Ø¹Ø¯Ø¯ Ø§Ù„Ø­Ø¶ÙˆØ± Ø§Ù„Ù…ØªÙˆÙ‚Ø¹ØŸ (Ù…Ø«Ø§Ù„: 500 Ø´Ø®Øµ)";
        } else if (message.includes('Ù…Ù‡Ø±Ø¬Ø§Ù†')) {
          conversationState.collectedInfo.eventType = 'festival';
          response = "Ø±Ø§Ø¦Ø¹! Ù…Ù‡Ø±Ø¬Ø§Ù†. ğŸª\n\nÙƒÙ… Ø¹Ø¯Ø¯ Ø§Ù„Ø­Ø¶ÙˆØ± Ø§Ù„Ù…ØªÙˆÙ‚Ø¹ØŸ (Ù…Ø«Ø§Ù„: 2000 Ø´Ø®Øµ)";
        } else if (message.includes('Ù…Ø¹Ø±Ø¶')) {
          conversationState.collectedInfo.eventType = 'exhibition';
          response = "Ø¹Ø¸ÙŠÙ…! Ù…Ø¹Ø±Ø¶. ğŸ¢\n\nÙƒÙ… Ø¹Ø¯Ø¯ Ø§Ù„Ø­Ø¶ÙˆØ± Ø§Ù„Ù…ØªÙˆÙ‚Ø¹ØŸ (Ù…Ø«Ø§Ù„: 1000 Ø´Ø®Øµ)";
        } else if (message.includes('ÙˆØ±Ø´Ø©')) {
          conversationState.collectedInfo.eventType = 'workshop';
          response = "Ù…Ù…ØªØ§Ø²! ÙˆØ±Ø´Ø© Ø¹Ù…Ù„. ğŸ› ï¸\n\nÙƒÙ… Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒÙŠÙ† Ø§Ù„Ù…ØªÙˆÙ‚Ø¹ØŸ (Ù…Ø«Ø§Ù„: 100 Ø´Ø®Øµ)";
        } else if (message.includes('Ø±ÙŠØ§Ø¶') || message.includes('Ø«Ù‚Ø§Ù') || message.includes('Ø®ÙŠØ±')) {
          conversationState.collectedInfo.eventType = 'cultural';
          response = "Ø±Ø§Ø¦Ø¹! ÙØ¹Ø§Ù„ÙŠØ© Ø«Ù‚Ø§ÙÙŠØ©. ğŸ­\n\nÙƒÙ… Ø¹Ø¯Ø¯ Ø§Ù„Ø­Ø¶ÙˆØ± Ø§Ù„Ù…ØªÙˆÙ‚Ø¹ØŸ";
        } else {
          response = "Ø£Ù‡Ù„Ø§Ù‹ ÙˆØ³Ù‡Ù„Ø§Ù‹! ğŸ˜Š\n\nÙ…Ø§ Ù†ÙˆØ¹ Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ©ØŸ\nâ€¢ Ù…Ø¤ØªÙ…Ø±\nâ€¢ Ù…Ù‡Ø±Ø¬Ø§Ù†\nâ€¢ Ù…Ø¹Ø±Ø¶\nâ€¢ ÙˆØ±Ø´Ø© Ø¹Ù…Ù„\nâ€¢ ÙØ¹Ø§Ù„ÙŠØ© Ø±ÙŠØ§Ø¶ÙŠØ©\nâ€¢ ÙØ¹Ø§Ù„ÙŠØ© Ø«Ù‚Ø§ÙÙŠØ©\nâ€¢ ÙØ¹Ø§Ù„ÙŠØ© Ø®ÙŠØ±ÙŠØ©";
        }
      } else if (!conversationState.collectedInfo.attendees) {
        const numbers = userMessage.match(/\d+/g);
        if (numbers) {
          conversationState.collectedInfo.attendees = parseInt(numbers[0]);
          response = `ØªÙ…Ø§Ù…! ${conversationState.collectedInfo.attendees} Ø´Ø®Øµ. ğŸ‘¥\n\nØ£ÙŠÙ† Ø³ØªÙ‚Ø§Ù… Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ©ØŸ (Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©/Ø§Ù„Ù…Ù†Ø·Ù‚Ø©)`;
        } else {
          response = "Ù„Ù… Ø£ØªÙ…ÙƒÙ† Ù…Ù† ÙÙ‡Ù… Ø§Ù„Ø¹Ø¯Ø¯. ÙŠØ±Ø¬Ù‰ ÙƒØªØ§Ø¨Ø© Ø¹Ø¯Ø¯ Ø§Ù„Ø­Ø¶ÙˆØ± Ø¨Ø§Ù„Ø£Ø±Ù‚Ø§Ù… (Ù…Ø«Ø§Ù„: 500)";
        }
      } else if (!conversationState.collectedInfo.location) {
        conversationState.collectedInfo.location = userMessage;
        response = `Ù…Ù…ØªØ§Ø²! ÙÙŠ ${userMessage}. ğŸ“\n\nÙƒÙ… ÙŠÙˆÙ… Ø³ØªØ³ØªÙ…Ø± Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ©ØŸ (Ù…Ø«Ø§Ù„: 3 Ø£ÙŠØ§Ù…)`;
      } else if (!conversationState.collectedInfo.duration) {
        const numbers = userMessage.match(/\d+/g);
        if (numbers) {
          conversationState.collectedInfo.duration = parseInt(numbers[0]);
          response = `ØªÙ…Ø§Ù…! ${conversationState.collectedInfo.duration} Ø£ÙŠØ§Ù…. â°\n\nÙƒÙ… Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø¨Ø§Ù†ÙŠ/Ø§Ù„Ù‚Ø§Ø¹Ø§ØªØŸ (Ù…Ø«Ø§Ù„: 2 Ù…Ø¨Ù†Ù‰)`;
        } else {
          response = "ÙŠØ±Ø¬Ù‰ ÙƒØªØ§Ø¨Ø© Ø¹Ø¯Ø¯ Ø§Ù„Ø£ÙŠØ§Ù… Ø¨Ø§Ù„Ø£Ø±Ù‚Ø§Ù… (Ù…Ø«Ø§Ù„: 3)";
        }
      } else if (!conversationState.collectedInfo.buildings) {
        const numbers = userMessage.match(/\d+/g);
        if (numbers) {
          conversationState.collectedInfo.buildings = parseInt(numbers[0]);
          response = `Ù…Ù…ØªØ§Ø²! ${conversationState.collectedInfo.buildings} Ù…Ø¨Ù†Ù‰/Ù‚Ø§Ø¹Ø©. ğŸ¢\n\nÙ…Ø§ Ù‡ÙŠ Ø§Ù„Ù…Ø³Ø§Ø­Ø© Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ© ØªÙ‚Ø±ÙŠØ¨Ø§Ù‹ØŸ (Ù…Ø«Ø§Ù„: 5000 Ù…ØªØ± Ù…Ø±Ø¨Ø¹)`;
        } else {
          response = "ÙŠØ±Ø¬Ù‰ ÙƒØªØ§Ø¨Ø© Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø¨Ø§Ù†ÙŠ Ø¨Ø§Ù„Ø£Ø±Ù‚Ø§Ù… (Ù…Ø«Ø§Ù„: 2)";
        }
      } else if (!conversationState.collectedInfo.area) {
        const numbers = userMessage.match(/\d+/g);
        if (numbers) {
          conversationState.collectedInfo.area = parseInt(numbers[0]);
          response = `ØªÙ…Ø§Ù…! ${conversationState.collectedInfo.area} Ù…ØªØ± Ù…Ø±Ø¨Ø¹. ğŸ“\n\nÙƒÙ… Ø³Ø§Ø¹Ø© Ø¹Ù…Ù„ ÙŠÙˆÙ…ÙŠØ§Ù‹ØŸ (Ù…Ø«Ø§Ù„: 8 Ø³Ø§Ø¹Ø§Øª)`;
        } else {
          response = "ÙŠØ±Ø¬Ù‰ ÙƒØªØ§Ø¨Ø© Ø§Ù„Ù…Ø³Ø§Ø­Ø© Ø¨Ø§Ù„Ø£Ø±Ù‚Ø§Ù… (Ù…Ø«Ø§Ù„: 5000)";
        }
      } else if (!conversationState.collectedInfo.workHours) {
        const numbers = userMessage.match(/\d+/g);
        if (numbers) {
          conversationState.collectedInfo.workHours = parseInt(numbers[0]);
          response = `Ù…Ù…ØªØ§Ø²! ${conversationState.collectedInfo.workHours} Ø³Ø§Ø¹Ø§Øª ÙŠÙˆÙ…ÙŠØ§Ù‹. â±ï¸\n\nÙ…Ø§ Ù…Ø³ØªÙˆÙ‰ ØªØ¹Ù‚ÙŠØ¯ Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ©ØŸ\nâ€¢ Ø¨Ø³ÙŠØ·\nâ€¢ Ù…ØªÙˆØ³Ø·\nâ€¢ Ù…Ø¹Ù‚Ø¯`;
        } else {
          response = "ÙŠØ±Ø¬Ù‰ ÙƒØªØ§Ø¨Ø© Ø¹Ø¯Ø¯ Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ø¹Ù…Ù„ Ø¨Ø§Ù„Ø£Ø±Ù‚Ø§Ù… (Ù…Ø«Ø§Ù„: 8)";
        }
      } else if (!conversationState.collectedInfo.complexity) {
        if (message.includes('Ø¨Ø³ÙŠØ·')) {
          conversationState.collectedInfo.complexity = 'simple';
        } else if (message.includes('Ù…ØªÙˆØ³Ø·')) {
          conversationState.collectedInfo.complexity = 'medium';
        } else if (message.includes('Ù…Ø¹Ù‚Ø¯')) {
          conversationState.collectedInfo.complexity = 'complex';
        } else {
          response = "ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØªØ¹Ù‚ÙŠØ¯:\nâ€¢ Ø¨Ø³ÙŠØ·\nâ€¢ Ù…ØªÙˆØ³Ø·\nâ€¢ Ù…Ø¹Ù‚Ø¯";
          appendMessage("bot", response);
          return;
        }
        
        // Ø¬Ù…Ø¹ ÙƒÙ„ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª - Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„ÙƒØ§Ù…Ù„
        response = generateCompleteAnalysis();
      } else {
        // Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙŠØ±ÙŠØ¯ ØªØ¹Ø¯ÙŠÙ„ Ø´ÙŠØ¡
        response = handleModification(userMessage);
      }
      
      appendMessage("bot", response);
    }

    function extractInfoFromMessage(message) {
      // Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ø£Ø±Ù‚Ø§Ù… ÙˆØ§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù…Ù† Ø§Ù„Ø±Ø³Ø§Ù„Ø©
      const numbers = message.match(/\d+/g);
      if (numbers) {
        const num = parseInt(numbers[0]);
        
        // ØªØ­Ø¯ÙŠØ¯ Ù†ÙˆØ¹ Ø§Ù„Ø±Ù‚Ù… Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ø³ÙŠØ§Ù‚
        if (message.includes('Ø´Ø®Øµ') || message.includes('Ø­Ø¶ÙˆØ±') || message.includes('Ù…Ø´Ø§Ø±Ùƒ')) {
          if (!conversationState.collectedInfo.attendees) {
            conversationState.collectedInfo.attendees = num;
          }
        } else if (message.includes('ÙŠÙˆÙ…') || message.includes('Ø£ÙŠØ§Ù…')) {
          if (!conversationState.collectedInfo.duration) {
            conversationState.collectedInfo.duration = num;
          }
        } else if (message.includes('Ù…Ø¨Ù†Ù‰') || message.includes('Ù‚Ø§Ø¹Ø©') || message.includes('ØµØ§Ù„Ø©')) {
          if (!conversationState.collectedInfo.buildings) {
            conversationState.collectedInfo.buildings = num;
          }
        } else if (message.includes('Ù…ØªØ±') || message.includes('Ù…Ø³Ø§Ø­Ø©')) {
          if (!conversationState.collectedInfo.area) {
            conversationState.collectedInfo.area = num;
          }
        } else if (message.includes('Ø³Ø§Ø¹Ø©') || message.includes('Ø³Ø§Ø¹Ø§Øª')) {
          if (!conversationState.collectedInfo.workHours) {
            conversationState.collectedInfo.workHours = num;
          }
        }
      }
    }

    function generateCompleteAnalysis() {
      const info = conversationState.collectedInfo;
      
      // Ø­Ø³Ø§Ø¨Ø§Øª Ù…ØªÙ‚Ø¯Ù…Ø© ÙˆØ¯Ù‚ÙŠÙ‚Ø©
      const eventMultipliers = {
        'conference': { base: 0.08, security: 0.003, medical: 0.002 },
        'festival': { base: 0.12, security: 0.008, medical: 0.004 },
        'exhibition': { base: 0.06, security: 0.004, medical: 0.002 },
        'workshop': { base: 0.05, security: 0.002, medical: 0.001 },
        'cultural': { base: 0.07, security: 0.003, medical: 0.002 }
      };

      const complexityMultipliers = {
        'simple': 1.0,
        'medium': 1.3,
        'complex': 1.6
      };

      const locationMultipliers = {
        'Ø§Ù„Ø±ÙŠØ§Ø¶': 1.2, 'Ø¬Ø¯Ø©': 1.1, 'Ø§Ù„Ø¯Ù…Ø§Ù…': 1.0, 'Ù…ÙƒØ©': 1.3,
        'Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©': 1.2, 'ØªØ¨ÙˆÙƒ': 0.9, 'Ø£Ø¨Ù‡Ø§': 0.9, 'Ø­Ø§Ø¦Ù„': 0.8
      };

      const eventMult = eventMultipliers[info.eventType] || eventMultipliers['conference'];
      const complexMult = complexityMultipliers[info.complexity];
      const locationMult = locationMultipliers[info.location] || 1.0;

      // Ø­Ø³Ø§Ø¨Ø§Øª Ø§Ù„Ù‚ÙˆÙ‰ Ø§Ù„Ø¹Ø§Ù…Ù„Ø©
      const baseVolunteers = Math.ceil(info.attendees * eventMult.base * complexMult * locationMult);
      const supervisors = Math.ceil(baseVolunteers / 8);
      const coordinators = Math.ceil(supervisors / 3);
      const managers = Math.ceil(coordinators / 2);
      
      // ÙØ±Ù‚ Ù…ØªØ®ØµØµØ©
      const security = Math.ceil(info.attendees * eventMult.security * complexMult);
      const medical = Math.ceil(info.attendees * eventMult.medical);
      const reception = Math.ceil(info.buildings * 2) + Math.ceil(info.attendees / 200);
      const technical = Math.ceil(info.buildings + (info.area / 1000));
      const logistics = Math.ceil(baseVolunteers / 15);
      const media = info.attendees > 200 ? Math.ceil(info.attendees / 500) : 1;
      
      // Ø­Ø³Ø§Ø¨Ø§Øª Ø§Ù„ØªÙƒÙ„ÙØ©
      const totalStaff = baseVolunteers + supervisors + coordinators + managers + security + medical + reception + technical + logistics + media;
      const dailyCost = totalStaff * 180; // Ù…ØªÙˆØ³Ø· Ø§Ù„ØªÙƒÙ„ÙØ© Ù„Ù„Ø´Ø®Øµ Ø§Ù„ÙˆØ§Ø­Ø¯
      const totalCost = dailyCost * info.duration;
      const equipmentCost = totalStaff * 120; // Ø²ÙŠ Ù…ÙˆØ­Ø¯ ÙˆÙ…Ø¹Ø¯Ø§Øª
      const finalCost = totalCost + equipmentCost;

      return `ğŸ¯ **Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø´Ø§Ù…Ù„ Ù„ÙØ¹Ø§Ù„ÙŠØªÙƒ**\n\n` +
             `ğŸ“‹ **Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ©:**\n` +
             `â€¢ Ø§Ù„Ù†ÙˆØ¹: ${getEventTypeArabic(info.eventType)}\n` +
             `â€¢ Ø§Ù„Ø­Ø¶ÙˆØ±: ${info.attendees.toLocaleString()} Ø´Ø®Øµ\n` +
             `â€¢ Ø§Ù„Ù…Ø¯Ø©: ${info.duration} Ø£ÙŠØ§Ù…\n` +
             `â€¢ Ø§Ù„Ù…ÙˆÙ‚Ø¹: ${info.location}\n` +
             `â€¢ Ø§Ù„Ù…Ø³Ø§Ø­Ø©: ${info.area.toLocaleString()} Ù…Â²\n` +
             `â€¢ Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ø¹Ù…Ù„: ${info.workHours} Ø³Ø§Ø¹Ø©/ÙŠÙˆÙ…\n` +
             `â€¢ Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØªØ¹Ù‚ÙŠØ¯: ${getComplexityArabic(info.complexity)}\n\n` +
             
             `ğŸ‘¥ **Ø§Ù„Ù‚ÙˆÙ‰ Ø§Ù„Ø¹Ø§Ù…Ù„Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©:**\n\n` +
             `**ğŸ”µ Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„ØªØ·ÙˆØ¹ÙŠ:**\n` +
             `â€¢ Ø§Ù„Ù…ØªØ·ÙˆØ¹ÙˆÙ† Ø§Ù„Ø£Ø³Ø§Ø³ÙŠÙˆÙ†: ${baseVolunteers} Ø´Ø®Øµ\n` +
             `â€¢ Ø§Ù„Ù…Ø´Ø±ÙÙˆÙ†: ${supervisors} Ø´Ø®Øµ\n` +
             `â€¢ Ø§Ù„Ù…Ù†Ø³Ù‚ÙˆÙ†: ${coordinators} Ø´Ø®Øµ\n` +
             `â€¢ Ø§Ù„Ù…Ø¯Ø±Ø§Ø¡: ${managers} Ø´Ø®Øµ\n\n` +
             
             `**ğŸ”´ Ø§Ù„ÙØ±Ù‚ Ø§Ù„Ù…ØªØ®ØµØµØ©:**\n` +
             `â€¢ Ø§Ù„Ø£Ù…Ù†: ${security} Ø´Ø®Øµ\n` +
             `â€¢ Ø§Ù„Ø·Ø¨ÙŠ/Ø§Ù„Ø¥Ø³Ø¹Ø§Ù: ${medical} Ø´Ø®Øµ\n` +
             `â€¢ Ø§Ù„Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ ÙˆØ§Ù„ØªÙˆØ¬ÙŠÙ‡: ${reception} Ø´Ø®Øµ\n` +
             `â€¢ Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ØªÙ‚Ù†ÙŠ: ${technical} Ø´Ø®Øµ\n` +
             `â€¢ Ø§Ù„Ù„ÙˆØ¬Ø³ØªÙŠØ§Øª: ${logistics} Ø´Ø®Øµ\n` +
             `â€¢ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù… ÙˆØ§Ù„ØªØ³ÙˆÙŠÙ‚: ${media} Ø´Ø®Øµ\n\n` +
             
             `ğŸ“Š **Ø§Ù„Ù…Ù„Ø®Øµ:**\n` +
             `â€¢ **Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù‚ÙˆÙ‰ Ø§Ù„Ø¹Ø§Ù…Ù„Ø©: ${totalStaff} Ø´Ø®Øµ**\n` +
             `â€¢ Ù†Ø³Ø¨Ø© Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† Ù„Ù„Ø­Ø¶ÙˆØ±: ${((totalStaff/info.attendees)*100).toFixed(1)}%\n` +
             `â€¢ Ø§Ù„ØªØºØ·ÙŠØ©: ${Math.round(info.attendees/totalStaff)} Ø­Ø¶ÙˆØ± Ù„ÙƒÙ„ Ù…ÙˆØ¸Ù\n\n` +
             
             `ğŸ’° **Ø§Ù„ØªÙƒÙ„ÙØ© Ø§Ù„ØªÙ‚Ø¯ÙŠØ±ÙŠØ©:**\n` +
             `â€¢ Ø§Ù„ØªÙƒÙ„ÙØ© Ø§Ù„ÙŠÙˆÙ…ÙŠØ©: ${dailyCost.toLocaleString()} Ø±ÙŠØ§Ù„\n` +
             `â€¢ ØªÙƒÙ„ÙØ© Ø§Ù„Ù…Ø¹Ø¯Ø§Øª ÙˆØ§Ù„Ø²ÙŠ: ${equipmentCost.toLocaleString()} Ø±ÙŠØ§Ù„\n` +
             `â€¢ **Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ØªÙƒÙ„ÙØ©: ${finalCost.toLocaleString()} Ø±ÙŠØ§Ù„**\n\n` +
             
             `ğŸ“ˆ **ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ù‚ÙˆÙ‰ Ø§Ù„Ø¹Ø§Ù…Ù„Ø© Ø¨Ø§Ù„Ù…Ù†Ø§Ø·Ù‚:**\n` +
             `${generateAreaDistribution(info, baseVolunteers, security, reception, technical)}\n\n` +
             
             `ğŸ’¡ **Ø§Ù„ØªÙˆØµÙŠØ§Øª:**\n` +
             `${generateRecommendations(info, totalStaff)}\n\n` +
             
             `âœ… **Ù‡Ù„ ØªØ±ÙŠØ¯ ØªØ¹Ø¯ÙŠÙ„ Ø£ÙŠ Ù…Ù† Ù‡Ø°Ù‡ Ø§Ù„ØªÙ‚Ø¯ÙŠØ±Ø§ØªØŸ**\n` +
             `ÙŠÙ…ÙƒÙ†Ùƒ Ù‚ÙˆÙ„ "ØºÙŠØ± Ø¹Ø¯Ø¯ Ø§Ù„Ù…ØªØ·ÙˆØ¹ÙŠÙ†" Ø£Ùˆ "Ø²ÙˆØ¯ Ø§Ù„Ø£Ù…Ù†" Ø£Ùˆ "Ù‚Ù„Ù„ Ø§Ù„ØªÙƒÙ„ÙØ©"`;
    }

    function getEventTypeArabic(type) {
      const types = {
        'conference': 'Ù…Ø¤ØªÙ…Ø±',
        'festival': 'Ù…Ù‡Ø±Ø¬Ø§Ù†', 
        'exhibition': 'Ù…Ø¹Ø±Ø¶',
        'workshop': 'ÙˆØ±Ø´Ø© Ø¹Ù…Ù„',
        'cultural': 'ÙØ¹Ø§Ù„ÙŠØ© Ø«Ù‚Ø§ÙÙŠØ©'
      };
      return types[type] || 'ÙØ¹Ø§Ù„ÙŠØ©';
    }

    function getComplexityArabic(complexity) {
      const levels = {
        'simple': 'Ø¨Ø³ÙŠØ·',
        'medium': 'Ù…ØªÙˆØ³Ø·',
        'complex': 'Ù…Ø¹Ù‚Ø¯'
      };
      return levels[complexity] || 'Ù…ØªÙˆØ³Ø·';
    }

    function generateAreaDistribution(info, volunteers, security, reception, technical) {
      const areasPerBuilding = Math.ceil(volunteers / info.buildings);
      const securityPerBuilding = Math.ceil(security / info.buildings);
      
      let distribution = ``;
      for (let i = 1; i <= info.buildings; i++) {
        distribution += `**Ø§Ù„Ù…Ø¨Ù†Ù‰ ${i}:** ${areasPerBuilding} Ù…ØªØ·ÙˆØ¹ØŒ ${securityPerBuilding} Ø£Ù…Ù†ØŒ ${Math.ceil(reception/info.buildings)} Ø§Ø³ØªÙ‚Ø¨Ø§Ù„\n`;
      }
      return distribution;
    }

    function generateRecommendations(info, totalStaff) {
      let recommendations = [];
      
      recommendations.push(`Ø§Ø¨Ø¯Ø£ Ø§Ù„ØªÙˆØ¸ÙŠÙ Ù‚Ø¨Ù„ ${info.duration > 2 ? '6 Ø£Ø³Ø§Ø¨ÙŠØ¹' : '4 Ø£Ø³Ø§Ø¨ÙŠØ¹'} Ù…Ù† Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ©`);
      recommendations.push(`Ù†Ø¸Ù… Ø¯ÙˆØ±Ø© ØªØ¯Ø±ÙŠØ¨ÙŠØ© Ù„Ù…Ø¯Ø© ${info.complexity === 'complex' ? '3 Ø£ÙŠØ§Ù…' : '2 ÙŠÙˆÙ…'}`);
      recommendations.push(`Ø§Ø­ØªÙØ¸ Ø¨Ù€ ${Math.ceil(totalStaff * 0.15)} Ø´Ø®Øµ Ø§Ø­ØªÙŠØ§Ø·ÙŠ (15%)`);
      
      if (info.attendees > 1000) {
        recommendations.push('Ø§Ø³ØªØ®Ø¯Ù… ØªØ·Ø¨ÙŠÙ‚ Ù…ÙˆØ¨Ø§ÙŠÙ„ Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙØ±Ù‚');
      }
      
      if (info.duration > 3) {
        recommendations.push('Ø®Ø·Ø· Ù„Ù†Ø¸Ø§Ù… ÙˆØ±Ø¯ÙŠØ§Øª Ù„ØªØ¬Ù†Ø¨ Ø§Ù„Ø¥Ø±Ù‡Ø§Ù‚');
      }
      
      if (info.workHours > 8) {
        recommendations.push('ÙˆÙØ± Ù…Ù†Ø§Ø·Ù‚ Ø±Ø§Ø­Ø© ÙƒØ§ÙÙŠØ© Ù„Ù„Ù…ÙˆØ¸ÙÙŠÙ†');
      }
      
      return recommendations.map(rec => `âœ… ${rec}`).join('\n');
    }

    function handleModification(message) {
      const msg = message.toLowerCase();
      
      if (msg.includes('ØºÙŠØ±') || msg.includes('Ø¹Ø¯Ù„') || msg.includes('Ø²ÙˆØ¯') || msg.includes('Ù‚Ù„Ù„')) {
        return `Ø¨Ø§Ù„Ø·Ø¨Ø¹! ÙŠÙ…ÙƒÙ†Ù†ÙŠ ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„ØªÙ‚Ø¯ÙŠØ±Ø§Øª. ğŸ”§\n\nÙ…Ø§ Ø§Ù„Ø°ÙŠ ØªØ±ÙŠØ¯ ØªØºÙŠÙŠØ±Ù‡ ØªØ­Ø¯ÙŠØ¯Ø§Ù‹ØŸ\n\nâ€¢ Ø¹Ø¯Ø¯ Ø§Ù„Ù…ØªØ·ÙˆØ¹ÙŠÙ†\nâ€¢ ÙØ±Ù‚ Ø§Ù„Ø£Ù…Ù†\nâ€¢ Ø§Ù„Ø·Ø§Ù‚Ù… Ø§Ù„Ø·Ø¨ÙŠ\nâ€¢ Ø§Ù„ØªÙƒÙ„ÙØ©\nâ€¢ ØªÙˆØ²ÙŠØ¹ Ø§Ù„ÙØ±Ù‚\nâ€¢ Ø£ÙŠ Ø´ÙŠØ¡ Ø¢Ø®Ø±\n\nÙ‚Ù„ Ù…Ø«Ù„Ø§Ù‹: "Ø²ÙˆØ¯ Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ù…Ù† Ø¥Ù„Ù‰ 20" Ø£Ùˆ "Ù‚Ù„Ù„ Ø§Ù„Ù…ØªØ·ÙˆØ¹ÙŠÙ†"`;
      }
      
      return `Ø´ÙƒØ±Ø§Ù‹! Ù‡Ù„ ØªØ±ÙŠØ¯:\n\nğŸ”„ **ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„ØªÙ‚Ø¯ÙŠØ±Ø§Øª** - Ù„ØªØºÙŠÙŠØ± Ø£ÙŠ Ø±Ù‚Ù…\nğŸ“Š **ØªØ­Ù„ÙŠÙ„ Ø¥Ø¶Ø§ÙÙŠ** - Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø£ÙƒØ«Ø± ØªÙØµÙŠÙ„Ø§Ù‹\nğŸ“‹ **Ø®Ø·Ø© Ø¬Ø¯ÙŠØ¯Ø©** - Ù„ÙØ¹Ø§Ù„ÙŠØ© Ù…Ø®ØªÙ„ÙØ©\nğŸ’¾ **Ø­ÙØ¸ Ø§Ù„ØªÙ‚Ø±ÙŠØ±** - Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù„Ø§Ø­Ù‚Ø§Ù‹\n\nÙ…Ø§Ø°Ø§ ØªØ®ØªØ§Ø±ØŸ`;
    }

    function appendMessage(sender, text) {
      const msg = document.createElement("div");
      msg.classList.add("message", sender);
      
      // ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ù†Øµ Ù„ÙŠØ¯Ø¹Ù… Ø§Ù„ØªÙ†Ø³ÙŠÙ‚
      const formattedText = text
        .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
        .replace(/\n/g, '<br>');
      
      msg.innerHTML = formattedText;
      chatBox.appendChild(msg);
      chatBox.scrollTop = chatBox.scrollHeight;
      return msg;
    }

    function showTypingIndicator() {
      typingIndicator.style.display = 'block';
      chatBox.scrollTop = chatBox.scrollHeight;
    }

    function hideTypingIndicator() {
      typingIndicator.style.display = 'none';
    }

    function sendSuggestion(suggestion) {
      userInput.value = suggestion;
      sendMessage();
    }

    sendBtn.addEventListener("click", sendMessage);
    userInput.addEventListener("keypress", (e) => {
      if (e.key === "Enter" && !sendBtn.disabled) {
        sendMessage();
      }
    });

    // Ø±Ø³Ø§Ù„Ø© ØªØ±Ø­ÙŠØ¨ÙŠØ© ØªÙ„Ù‚Ø§Ø¦ÙŠØ©
    setTimeout(() => {
      appendMessage("bot", "Ù…Ø±Ø­Ø¨Ø§Ù‹! Ø£Ù†Ø§ Ù‡Ù†Ø§ Ù„Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ ÙÙŠ ØªÙ‚Ø¯ÙŠØ± Ø§Ù„Ù‚ÙˆÙ‰ Ø§Ù„Ø¹Ø§Ù…Ù„Ø© Ø§Ù„ØªØ·ÙˆØ¹ÙŠØ© Ù„ÙØ¹Ø§Ù„ÙŠØªÙƒ. Ø³Ø£Ø­Ù„Ù„ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØªÙŠ ØªØ¹Ø·ÙŠÙ†ÙŠ Ø¥ÙŠØ§Ù‡Ø§ ÙˆØ£Ù‚Ø¯Ù… Ù„Ùƒ ØªÙ‚Ø±ÙŠØ±Ø§Ù‹ Ù…ÙØµÙ„Ø§Ù‹ ÙŠØ´Ù…Ù„ Ø¹Ø¯Ø¯ Ø§Ù„Ù…ØªØ·ÙˆØ¹ÙŠÙ† ÙˆØ§Ù„Ù…Ù†Ø¸Ù…ÙŠÙ† ÙˆØ§Ù„Ù…Ø´Ø±ÙÙŠÙ† ÙˆØ§Ù„Ù…Ø³Ø¹ÙÙŠÙ† ÙˆØ­ØªÙ‰ Ø§Ù„ØªÙƒÙ„ÙØ© Ø§Ù„Ù…ØªÙˆÙ‚Ø¹Ø©! ğŸ¯\n\nÙ…Ø§ Ù†ÙˆØ¹ Ø§Ù„ÙØ¹Ø§Ù„ÙŠØ© Ø§Ù„ØªÙŠ ØªØ®Ø·Ø· Ù„Ù‡Ø§ØŸ");
    }, 1000);
  </script>
</body>
</html>
